##########################
# Iterating over a slice #
##########################

;; An array of up to 100 floats
struct Array {
    elems: @Float[100],
    len: Usize,
}


struct Slice {
    n: Usize,
    m: Usize,
}

struct SliceIter {
    i: Usize,
    lim: Usize,
}


func slice(begin: Usize, end: Usize) -> Slice{
    return Slice{begin, end};
}

func iter(arr: Array, slice: Slice) -> arr[ SliceIter ] {
    return SliceIter{slice.n, slice.m};
}

func valid(arr: Array, iter: SliceIter) -> Bool {
    return iter.i < arr.len && iter.i < iter.lim;
}

func next(arr: Array, iter: mut SliceIter) {
    iter.i++;
}

func get(arr: Array, iter: SliceIter) -> Float {
    return arr.elems[iter.i];
}

func set(arr: Array, iter: SliceIter, val: Float) {
    arr.elems[iter.i] = val;
}

func calmpTo0(arr: mut Array, n: Usize, m: Usize) {
    for (elem in arr[n:m]) {
        if (elem < 0) {
            elem = 0.0f;
        }
    }
}
