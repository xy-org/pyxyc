import Clib~[Clib{headers=@{"time.h"}}] in c;

struct AllSlice {
}

func slice() = AllSlice{};

struct IntSlice {
    begin: Int,
    end: Int,
    step: Int,
}

func max(:Int) -> Int {
    return c.INT32_MAX;
}

func slice(begin: Int, end := Int'max, step := 1) = IntSlice{begin, end, step};
func slice(end : Int, step := 1) = IntSlice{0, end, step};
func slice(step : Int) = IntSlice{0, max(Int), step};

func testIntSlices() {
    a := :;
    b := 1:;
    x := 10;
    y := 1000;
    c := 0:x;
    d := 1:x:y;
    e := ::-1;
    f := :x;
    g := :x:y;
    i := x::y;
    j := x:y;
    k := x:y;
}

struct Date {
    unixtime: Long,
}

struct DateSlice {
    begin: Date,
    end: Date,
    step: Date,
}

func max(:Long) -> Long {
    return c.INT64_MAX;
}
func max(:Date) = Date{max(Long)};

func slice(begin: Date, end := Date'max, step := Date{1L}) = DateSlice{begin, end, step};
func slice(end: Date, step := Date{1L}) = DateSlice{Date{0}, end, step};
func slice(step: Date) = DateSlice{Date{0}, Date'max, step};

func today() = Date{c.time(c.NULL)};
func tomorrow() = Date{today().unixtime + 24l*60*60};

func testDataSlices() {
    today := today();
    tomorrow := tomorrow();
    a := today:tomorrow;
    b := tomorrow:today:Date{-1L};
    d := :tomorrow;
}