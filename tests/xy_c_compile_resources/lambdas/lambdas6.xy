func fun(f: Func) =
    f2(toCallback(
        func wrapper(p: Ptr, f := f) = [f]([p~Int])'to(Int), (:Ptr) -> Int
    ));

func f2(cb: (:Ptr)->Int) {
    num: mut = 10;
    res := [cb](num'addrof);
}

func my(x: Int) -> Long {
    return x'to(Long);
}

func test() {
    fun($my(Int));
    fun(func something(x: Int) -> Int {
        return 500;
    });
}
