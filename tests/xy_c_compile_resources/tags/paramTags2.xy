struct Str~[hash: Int = void] {
    addr: Ptr;
    size: Size;
}

def f1(s: Str) -> Int {
    # calculate hash or something
    return -10;
}

def f2(s: Str) = s..(hash, -20);

def test() -> Int {
    s1: Str;
    s2: Str~10;
    s3: Str~[hash=20];
    x := f1(s1) + f1(s2);
    y := f2(s1) + f2(s2);
    z := f2(s3) + f1(s3);
    return x + y + z;
}
