# test modifying a donated value with dtor

struct Array {
    ptr: Ptr~Int,
}

func get(arr: Array, idx: Int) -> arr[ Ptr~Int ] {
    return arr.ptr + idx;
}

func modifyFunc(a: don Int) {
    void =< a;
}

func modifyMacro(a: don Int) = -> void {
    void =< a;
};

func testFunc() {
    s: Array;
    modifyFunc(s[1]);
}

func testMacro1() {
    s: Array;
    modifyMacro(s[1]);
}

func testMacro2(s: Array) {
    modifyMacro(s[3]);
}

func testMacro3(s: Array) {
    modifyMacro(a=s[3]);
}