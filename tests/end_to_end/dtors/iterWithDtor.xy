;; Test iterator that has a dtor

import libxy.stdio;
import libxy.string;

struct Iter {
    n := 0;
    # ...
}

func dtor(m: Iter) {
    print("Destroying Iter\n");
}

func ls~IterCtor() -> [ Iter ] {
    return Iter{};
}

func valid(iter: Iter) -> Bool {
    return iter.n < 10;
}

func next(iter: mut Iter) {
    iter.n++;
}

func get(iter: Iter) -> Int {
    return 0;
}

func main~EntryPoint() {
    for (resource in ls()) {
        # ...
        x := resource;
    }
}
